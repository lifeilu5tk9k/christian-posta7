server_param {
  downpour_server_param {
    downpour_table_param {
      table_id: 0
      table_class: "DownpourSparseTable"
      shard_num: 1950
      accessor {
        accessor_class: "DownpourCtrAccessor"
        sparse_sgd_param {
          learning_rate: 0.05
          initial_g2sum: 3.0
          initial_range: 0.0001
          weight_bounds: -10.0
          weight_bounds: 10.0
        }
        fea_dim: 11
        embedx_dim: 8
        embedx_threshold: 10
        downpour_accessor_param {
          nonclk_coeff: 0.1
          click_coeff: 1
          base_threshold: 1.5
          delta_threshold: 0.25
          delta_keep_days: 16
          delete_after_unseen_days: 30
          show_click_decay_rate: 0.98
          delete_threshold: 0.8
        }
        table_accessor_save_param {
          param: 1
          converter: "(tool/xbox_compressor_mf.py | tool/xbox_pb_converter)"
          deconverter:  "(tool/xbox_pb_deconverter | tool/xbox_decompressor_mf.awk)"
        }   
        table_accessor_save_param {
          param: 2
          converter: "(tool/xbox_compressor_mf.py | tool/xbox_pb_converter)"
          deconverter:  "(tool/xbox_pb_deconverter | tool/xbox_decompressor_mf.awk)"
        }
      }
      type: PS_SPARSE_TABLE
      compress_in_save: true
    }
    downpour_table_param {
      table_id: 1
      table_class: "DownpourDenseTable"
      accessor {
        accessor_class: "DownpourDenseValueAccessor"
        dense_sgd_param {
          name: "adam"
          adam {
            learning_rate: 5e-06
            avg_decay_rate: 0.999993
            ada_decay_rate: 0.9999
            ada_epsilon: 1e-08
            mom_decay_rate: 0.99
          }
          naive {
            learning_rate: 0.0002
          }
        }
        fea_dim: 2571127
      }
      type: PS_DENSE_TABLE
      compress_in_save: true
    }
    downpour_table_param {
      table_id: 2
      table_class: "DownpourDenseDoubleTable"
      accessor {
        accessor_class: "DownpourDenseValueDoubleAccessor"
        dense_sgd_param {
          name: "summarydouble"
          summary {
            summary_decay_rate: 0.999999
          }
        }
        fea_dim: 13464
      }
      type: PS_DENSE_TABLE
      compress_in_save: true
    }
    downpour_table_param {
      table_id: 3
      table_class: "DownpourDenseTable"
      accessor {
        accessor_class: "DownpourDenseValueAccessor"
        dense_sgd_param {
          name: "adam"
          adam {
            learning_rate: 5e-06
            avg_decay_rate: 0.999993
            ada_decay_rate: 0.9999
            ada_epsilon: 1e-08
            mom_decay_rate: 0.99
          }
          naive {
            learning_rate: 0.0002
          }
        }
        fea_dim: 2072615
      }
      type: PS_DENSE_TABLE
      compress_in_save: true
    }
    service_param {
      server_class: "DownpourBrpcPsServer"
      client_class: "DownpourBrpcPsClient"
      service_class: "DownpourPsService"
      start_server_port: 0
      server_thread_num: 12
    }
  }
}

fs_client_param {
  uri: "afs://xingtian.afs.baidu.com:9902"
  user: "mlarch"
  passwd: "Fv1M87"
  hadoop_bin: "$HADOOP_HOME/bin/hadoop"
}
